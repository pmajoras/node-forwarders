{"version":3,"sources":["implementations/LogTransformStream.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;AACb,uBAAwB,QAAQ,CAAC,CAAA;AAEjC;IAAwC,sCAAS;IAC/C,4BAAY,OAAO;QACjB,kBAAM,OAAO,CAAC,CAAC;IACjB,CAAC;IAID,uCAAU,GAAV,UAAW,KAAK,EAAE,QAAQ,EAAE,IAAI;QAC9B,IAAI,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QACnC,CAAC;QAED,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC7B,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE1D,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC;IACT,CAAC;IAED,mCAAM,GAAN,UAAO,IAAI;QACT,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAChC,CAAC;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,EAAE,CAAC;IACT,CAAC;IACH,yBAAC;AAAD,CA5BA,AA4BC,CA5BuC,kBAAS,GA4BhD;AA5BY,0BAAkB,qBA4B9B,CAAA","file":"implementations/LogTransformStream.js","sourcesContent":["'use strict';\nimport {Transform} from 'stream';\n\nexport class LogTransformStream extends Transform {\n  constructor(options) {\n    super(options);\n  }\n\n  private _lastLineData: any;\n\n  _transform(chunk, encoding, done) {\n    var data = chunk.toString();\n    if (this._lastLineData) {\n      data = this._lastLineData + data;\n    }\n\n    var lines = data.split('\\n');\n    this._lastLineData = lines.splice(lines.length - 1, 1)[0];\n\n    lines.forEach(this.push.bind(this));\n    done();\n  }\n\n  _flush(done) {\n    if (this._lastLineData) {\n      this.push(this._lastLineData);\n    }\n\n    this._lastLineData = null;\n    done();\n  }\n}\n"],"sourceRoot":"/source/"}